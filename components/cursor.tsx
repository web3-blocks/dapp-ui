"use client";

import * as React from "react";
import { motion } from "motion/react";
import { usePathname } from "next/navigation";

import { useCursor } from "@/hooks/cursor";

export const CustomCursor = () => {
  const pathname = usePathname();
  const { x, y, angle } = useCursor();

  const cursorRef = React.useRef<SVGSVGElement | null>(null);
  const [isPointer, setIsPointer] = React.useState<boolean>(false);

  React.useEffect(() => {
    if (!cursorRef.current) return;
    cursorRef.current.style.transform = `translate(${x}px, ${y}px)`;
  }, [x, y, angle, isPointer]);

  React.useEffect(() => {
    const interactiveElements = document.querySelectorAll(
      'a, button, [data-cursor="pointer"], [role="button"]'
    );

    const handleMouseEnter = () => setIsPointer(true);
    const handleMouseLeave = () => setIsPointer(false);

    interactiveElements.forEach((el) => {
      el.addEventListener("mouseenter", handleMouseEnter);
      el.addEventListener("mouseleave", handleMouseLeave);
    });

    return () => {
      interactiveElements.forEach((el) => {
        el.removeEventListener("mouseenter", handleMouseEnter);
        el.removeEventListener("mouseleave", handleMouseLeave);
      });
    };
  }, [pathname]);

  return (
    <motion.svg
      animate={{
        x: x - 10,
        y: y - 10,
      }}
      transition={{
        type: "inertia",
        damping: 0,
        stiffness: 0,
      }}
      ref={cursorRef}
      width="16"
      height="17"
      viewBox="0 0 16 17"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className="pointer-events-none fixed z-9999 hidden size-4 lg:block"
    >
      {isPointer ? (
        <>
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M3.82053 13.4501C3.97083 13.5855 4.0746 13.6828 4.39524 13.9874C4.70931 14.2857 4.86119 14.4267 5.00007 14.5446C5.05799 14.5934 5.10737 14.7238 5.12693 14.9178C5.14303 15.0773 5.13743 15.2553 5.11791 15.4268C5.11117 15.4861 5.10466 15.5289 5.10093 15.5493C5.05906 15.778 5.23342 15.9894 5.466 15.9917C5.6753 15.9939 5.83657 15.9965 6.26341 16.0041C6.37021 16.006 6.37021 16.006 6.47737 16.0078C7.63766 16.0278 8.23027 16.0223 8.65559 15.9688C9.11021 15.9117 9.57841 15.3626 9.98314 14.6737C10.3261 15.2833 10.8018 15.8786 11.2821 15.956C11.4347 15.9804 11.6194 15.9879 11.8333 15.983C11.9929 15.9793 12.1617 15.9688 12.332 15.9536C12.4605 15.9421 12.5629 15.9306 12.624 15.9226C12.8499 15.8933 12.9978 15.671 12.9374 15.4514C12.9244 15.4039 12.9034 15.3169 12.8823 15.2073C12.8578 15.0802 12.8401 14.9561 12.832 14.8431C12.8269 14.7714 12.8259 14.7065 12.8292 14.6504C12.8348 14.5526 12.8366 14.4979 12.8393 14.3713C12.8404 14.3242 12.8404 14.3242 12.8418 14.283C12.847 14.1482 12.8652 14.0201 12.9238 13.7408C12.949 13.6196 13.0711 13.3876 13.2634 13.1006C13.3207 13.0151 13.3833 12.9258 13.4504 12.8336C13.5776 12.6588 13.7145 12.4822 13.8514 12.3132C13.9335 12.212 13.9969 12.1363 14.0322 12.0951C14.3285 11.6707 14.6443 10.976 14.7604 10.5698C14.8718 10.1794 14.9609 9.4604 15.0157 8.75373C15.0457 8.35284 15.0568 8.02968 15.0568 7.52275C15.0569 7.43384 15.0569 7.43384 15.057 7.36041C15.0573 7.24015 15.0573 7.19467 15.0569 7.13845C15.0558 6.98487 15.0514 6.83265 15.0365 6.44443C15.0046 5.63078 14.5587 5.10474 13.9017 5.00327C13.3427 4.91695 12.6623 5.38123 12.6623 5.38123C12.6623 5.38123 12.5108 4.85842 12.4086 4.69702C12.2424 4.43767 11.8144 4.10719 11.4872 4.04281C11.1507 3.97747 10.7518 3.98469 10.3855 4.04949C10.0647 4.10689 9.74514 4.39331 9.5603 4.70226C9.42806 4.92265 9.55243 4.69057 9.42017 4.46258C9.23712 4.14856 8.81084 3.86735 8.40492 3.78436C8.06096 3.71323 7.66691 3.74032 7.30697 3.84729C6.84393 3.98566 6.77022 4.33803 6.7518 4.23714C6.69022 3.8989 6.68453 3.92113 6.64615 3.67984C6.50357 2.78457 6.34401 2.16511 6.10208 1.62456C6.116 1.65564 6.01347 1.42241 5.97616 1.34199C5.91155 1.20274 5.84706 1.0767 5.77617 0.955471C5.55766 0.581821 5.30725 0.302061 4.99307 0.143132C4.44746 -0.133162 3.62966 0.00130096 3.24202 0.45378C2.85706 0.903448 2.79287 1.65527 2.88982 2.58562C2.92685 2.94683 3.05661 3.60628 3.17427 4.09374C3.21588 4.26293 3.25233 4.41723 3.31919 4.70226C3.33068 4.75074 3.33068 4.75074 3.34228 4.79924C3.394 5.01496 3.43936 5.19244 3.49351 5.3872C3.48782 5.3669 3.59052 5.73129 3.61239 5.81193C3.61967 5.83885 3.61967 5.83885 3.62688 5.86588C3.6677 6.01966 3.70762 6.18548 3.76998 6.46219C3.8041 6.61434 3.8374 6.77688 3.86997 6.94918C3.95881 7.41911 3.95925 7.32126 3.87373 7.22105C3.81466 7.15182 3.7591 7.08895 3.70543 7.03101C3.60566 6.92331 3.51394 6.83424 3.42687 6.7632C2.79247 6.24414 2.40374 6.0148 1.87005 5.96441C0.994634 5.88031 0.163852 6.49868 0.0389336 7.33324C-0.0378933 7.84494 -0.0131427 8.08047 0.223569 8.53267C0.353832 8.777 0.574177 9.07209 0.985297 9.58002C1.01046 9.61109 1.01046 9.61109 1.0356 9.64209C1.54025 10.264 1.59522 10.333 1.71522 10.5068C2.03957 10.9775 2.82917 12.329 2.9727 12.5104L3.82053 13.4501Z"
            fill="var(--foreground)"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M1.61802 9.16949C1.59313 9.13882 1.59313 9.13882 1.56831 9.10817C1.19102 8.64203 0.984133 8.36496 0.886751 8.18232C0.733934 7.89037 0.725619 7.81124 0.780693 7.44443C0.845427 7.01196 1.31251 6.6643 1.79899 6.71103C2.13559 6.74281 2.42967 6.91631 2.95239 7.34399C3.00898 7.39016 3.07721 7.45643 3.15527 7.54069C3.20143 7.59053 3.2504 7.64593 3.30327 7.70789C3.38268 7.80095 3.6503 8.12841 3.61088 8.08076C3.66903 8.15067 3.7106 8.20484 3.7581 8.27121C3.85221 8.40555 3.90515 8.48016 3.97685 8.57575C3.94323 8.53088 4.19158 8.87419 4.24417 8.92439C4.52277 9.19032 4.9262 8.96635 4.90093 8.61194C4.89671 8.55277 4.8828 8.48885 4.85375 8.37727C4.73888 7.55803 4.69869 7.29509 4.60697 6.80987C4.5729 6.62963 4.53792 6.45888 4.50176 6.29768C4.4374 6.01211 4.3954 5.83761 4.35181 5.67343C4.34406 5.64435 4.34406 5.64435 4.33629 5.61559C4.31328 5.53077 4.20904 5.16089 4.21598 5.1857C4.16463 5.00102 4.12143 4.83196 4.07166 4.62437C4.06035 4.57708 4.06035 4.57708 4.04906 4.52947C3.98257 4.24596 3.94518 4.08771 3.903 3.9162C3.79301 3.46052 3.66874 2.829 3.6359 2.50852C3.56043 1.7843 3.6125 1.17433 3.81172 0.941629C3.96727 0.760061 4.40813 0.687575 4.65444 0.812304C4.81551 0.893785 4.97648 1.07362 5.12879 1.33407C5.18643 1.43264 5.24051 1.53834 5.29587 1.65765C5.3294 1.72991 5.4288 1.95602 5.4176 1.93102C5.62792 2.40094 5.7724 2.96189 5.90552 3.79773C5.94491 4.04539 5.99365 4.32597 6.05616 4.66924C6.07473 4.77102 6.07474 4.77102 6.09339 4.87238C6.39478 6.50772 6.37272 6.38377 6.37706 6.5142C6.39286 6.98999 7.09516 7.00113 7.12606 6.52609C7.13586 6.37544 7.13237 6.24093 7.11498 5.85463C7.11253 5.79997 7.11253 5.79997 7.11016 5.74553C7.09495 5.38962 7.09582 5.18486 7.11687 5.06847C7.15521 4.85624 7.34574 4.61849 7.52121 4.56605C7.76763 4.49282 8.03762 4.47426 8.25391 4.51898C8.46095 4.56132 8.70256 4.7207 8.77188 4.83961C8.85541 4.98361 8.92704 5.20298 8.98194 5.47491C9.02625 5.69439 9.05674 5.92985 9.07819 6.18116C9.08487 6.25935 9.08922 6.31975 9.09591 6.4197C9.09876 6.46154 9.09876 6.46154 9.1016 6.49606C9.10321 6.51337 9.10321 6.51337 9.10712 6.54073C9.11015 6.5599 9.11015 6.5599 9.12446 6.60847C9.13173 6.74629 9.13173 6.74629 9.68527 6.7974C9.85058 6.59757 9.85058 6.59757 9.84605 6.56253C9.87313 6.44418 9.8897 6.31227 9.91332 6.06439C9.92841 5.90327 9.93601 5.82406 9.9449 5.7419C9.98169 5.40178 10.0284 5.18568 10.0854 5.09069C10.1561 4.9725 10.4052 4.80788 10.5169 4.78789C10.7974 4.73827 11.1055 4.73269 11.3434 4.77888C11.4511 4.80008 11.7139 5.00302 11.7761 5.10009C11.9038 5.30165 12.0281 5.95147 12.098 6.59621C12.087 6.63849 12.087 6.63849 12.2588 6.88381C12.8491 6.81651 12.8491 6.81651 12.8325 6.70992C12.8481 6.67193 12.8605 6.628 12.878 6.55978C12.9202 6.40007 12.9482 6.30734 12.9898 6.20342C13.0187 6.13153 13.049 6.07006 13.0802 6.02114C13.2009 5.83121 13.5133 5.70218 13.7872 5.74449C14.0815 5.78992 14.269 6.01114 14.2871 6.47345C14.3017 6.85388 14.306 7.00013 14.307 7.14368C14.3074 7.19665 14.3073 7.23917 14.3071 7.35878C14.3069 7.43269 14.3069 7.43269 14.3068 7.52275C14.3068 8.01168 14.2964 8.31629 14.2679 8.69676C14.2173 9.35002 14.1318 10.0396 14.0392 10.3638C13.9448 10.6944 13.6628 11.3147 13.4395 11.6373C13.4237 11.6526 13.3557 11.7338 13.2688 11.841C13.1242 12.0194 12.9796 12.206 12.844 12.3923C12.7714 12.492 12.7033 12.5892 12.6403 12.6832C12.3966 13.0469 12.2403 13.344 12.1897 13.5875C12.1233 13.9039 12.0995 14.0717 12.0924 14.2536C12.0906 14.3052 12.0906 14.3052 12.0895 14.3551C12.087 14.4732 12.0854 14.5208 12.0805 14.6072C12.0752 14.6978 12.0767 14.7944 12.084 14.8963C12.0944 15.0423 12.084 15.2418 12.084 15.2418C12.084 15.2418 11.9573 15.2299 11.8161 15.2332C11.6436 15.2372 11.5001 15.2313 11.401 15.2154C11.2579 15.1924 10.8716 14.709 10.6738 14.3324C10.3716 13.756 9.6378 13.7839 9.337 14.293C9.0657 14.7548 8.67735 15.2102 8.56207 15.2247C8.18746 15.2718 7.60736 15.2772 6.49031 15.2579C6.38352 15.2561 6.38352 15.2561 6.27683 15.2542C5.84793 15.2465 5.86441 15.3189 5.87319 15.2418C5.89826 15.0215 5.89542 15.0627 5.87319 14.8425C5.83593 14.4731 5.72194 14.172 5.48442 13.9719C5.36155 13.8676 5.21459 13.7312 4.91941 13.4508C4.58219 13.1305 4.47658 13.0315 4.34642 12.9171L3.54512 12.0264C3.45716 11.9139 2.6851 10.5924 2.33263 10.081C2.19552 9.8824 2.14424 9.81794 1.61802 9.16949ZM11.1267 9.17325V12.6323C11.1267 13.1323 11.8767 13.1323 11.8767 12.6323V9.17325C11.8767 8.67325 11.1267 8.67325 11.1267 9.17325ZM9.09515 9.17268L9.11115 12.6457C9.11346 13.1457 9.86345 13.1422 9.86115 12.6422L9.84515 9.16923C9.84284 8.66923 9.09285 8.67269 9.09515 9.17268ZM7.88604 12.6263L7.86504 9.20026C7.86198 8.70026 7.11199 8.70486 7.11506 9.20485L7.13606 12.6309C7.13912 13.1308 7.88911 13.1262 7.88604 12.6263Z"
            fill="var(--background)"
          />
        </>
      ) : (
        <path
          d="M0.503906 1.58984C0.430551 0.744184 1.37862 0.197815 2.07422 0.68457L11.7334 7.44434C12.4856 7.97072 12.1908 9.14679 11.2793 9.25586L6.53125 9.82227L6.31836 9.84766L6.18945 10.0195L3.3252 13.8486C2.77513 14.5835 1.60808 14.2507 1.52832 13.3359L0.503906 1.58984Z"
          fill="var(--background)"
          stroke="var(--foreground)"
        />
      )}
    </motion.svg>
  );
};
