{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "connectors",
  "type": "registry:ui",
  "dependencies": [
    "@radix-ui/react-dialog",
    "@web3-blocks/dapp-ui"
  ],
  "files": [
    {
      "path": "registry/new-york/ui/connectors.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport Link from \"next/link\"\nimport { ConnectState, useEthereum } from \"@web3-blocks/dapp-ui\"\nimport { AlertCircle, Check, Loader2, Wallet } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Callout } from \"@/components/shared/callout\"\n\ntype ConnectorItem = {\n  id?: string | number\n  name?: string\n  ready?: boolean\n  installed?: boolean\n  icon?: React.ReactNode\n}\n\ntype ConnectorsModalProps = {\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n  title?: string\n  description?: string\n  triggerText?: string\n  className?: string\n}\n\nexport function ConnectorsModal({\n  open,\n  onOpenChange,\n  title = \"Connect a Wallet\",\n  description = \"Choose a wallet connector to start using your account.\",\n  triggerText = \"Connect\",\n  className,\n}: ConnectorsModalProps) {\n  const {\n    account,\n    connect: { fn, loading, isWalletAvailable, error, connectors },\n  } = useEthereum()\n\n  // Derived states\n  const isConnected = account?.isConnected\n  const list: ConnectorItem[] = Array.isArray(connectors) ? connectors : []\n  const [selectedIndex, setSelectedIndex] = React.useState<number | null>(null)\n  const itemsRef = React.useRef<Array<HTMLButtonElement | null>>([])\n\n  const handleConnect = async (connector?: unknown) => {\n    try {\n      await fn(connector as ConnectState[\"connectors\"][number])\n    } catch {\n      // Error is surfaced via hook; keep local catch for safety\n      // no-op\n    }\n  }\n\n  const onSelect = (idx: number, connector: ConnectorItem) => {\n    setSelectedIndex(idx)\n    handleConnect(connector)\n  }\n\n  const handleKeyNav: React.KeyboardEventHandler<HTMLDivElement> = (e) => {\n    if (!list.length) return\n    if (e.key === \"ArrowDown\" || e.key === \"ArrowUp\") {\n      e.preventDefault()\n      const current = selectedIndex ?? 0\n      const next = e.key === \"ArrowDown\" ? current + 1 : current - 1\n      const clamped = Math.max(0, Math.min(list.length - 1, next))\n      setSelectedIndex(clamped)\n      const el = itemsRef.current[clamped]\n      el?.focus()\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogTrigger asChild>\n        <Button variant={isConnected ? \"ghost\" : \"outline\"} className=\"gap-2\">\n          {!isConnected ? (\n            <>\n              <span>{triggerText}</span>\n              <Wallet className=\"size-4\" />\n            </>\n          ) : (\n            <>\n              <span>Wallet Connected</span>\n              <Check className=\"size-4\" />\n            </>\n          )}\n        </Button>\n      </DialogTrigger>\n      <DialogContent className={cn(\"sm:max-w-3xl\", className)}>\n        <div className=\"grid grid-cols-1 gap-0 sm:grid-cols-[280px,1fr]\">\n          {/* Left panel */}\n          <aside\n            className=\"bg-muted/40 border-muted relative flex min-h-[340px] flex-col gap-3 border-r p-4\"\n            role=\"region\"\n            aria-label=\"Wallet connectors\"\n            onKeyDownCapture={handleKeyNav}\n          >\n            <div className=\"mb-2\">\n              <h3 className=\"text-xl font-semibold\">Connect a Wallet</h3>\n              <p className=\"text-muted-foreground text-sm\">\n                Choose a wallet to continue\n              </p>\n            </div>\n\n            <ScrollArea className=\"pr-2\">\n              {list.length ? (\n                <div\n                  className=\"flex flex-col gap-2\"\n                  role=\"listbox\"\n                  aria-label=\"Available wallets\"\n                >\n                  {list.map((connector, idx) => {\n                    const disabled = loading || connector?.ready === false\n                    const label = connector?.name ?? `Connector ${idx + 1}`\n                    const selected = selectedIndex === idx\n                    return (\n                      <button\n                        key={String(connector?.id ?? idx)}\n                        ref={(el) => (itemsRef.current[idx] = el)}\n                        className={cn(\n                          \"ring-offset-background focus-visible:ring-ring focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none\",\n                          \"hover:bg-background bg-card text-card-foreground flex items-center justify-between gap-2 rounded-md border p-3\",\n                          selected && \"border-primary\"\n                        )}\n                        onClick={() => onSelect(idx, connector)}\n                        disabled={disabled}\n                        aria-disabled={disabled}\n                        role=\"option\"\n                        aria-selected={selected}\n                        tabIndex={selected ? 0 : -1}\n                        title={\n                          connector?.ready === false\n                            ? \"Connector not ready\"\n                            : undefined\n                        }\n                      >\n                        <div className=\"flex items-center gap-2\">\n                          {connector?.icon ? (\n                            typeof connector.icon === \"string\" ? (\n                              <img\n                                src={connector.icon}\n                                alt=\"\"\n                                width={20}\n                                height={20}\n                                className=\"rounded\"\n                              />\n                            ) : (\n                              connector.icon\n                            )\n                          ) : (\n                            <Wallet className=\"size-4\" />\n                          )}\n                          <span className=\"truncate\">{label}</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          {loading && (\n                            <Loader2\n                              className=\"size-4 animate-spin\"\n                              aria-hidden=\"true\"\n                            />\n                          )}\n                          {connector?.installed && (\n                            <Badge variant=\"secondary\">Installed</Badge>\n                          )}\n                        </div>\n                      </button>\n                    )\n                  })}\n                </div>\n              ) : (\n                <div className=\"text-muted-foreground space-y-3 text-sm\">\n                  <p>No wallets detected.</p>\n                  <p>\n                    Install a compatible wallet to continue. See the setup\n                    guide:\n                  </p>\n                  <Button asChild variant=\"outline\" className=\"w-fit\">\n                    <Link href=\"/docs/wallets\">View Wallets</Link>\n                  </Button>\n                </div>\n              )}\n            </ScrollArea>\n          </aside>\n\n          {/* Right panel */}\n          <section className=\"flex min-h-[340px] flex-col items-center justify-center gap-2 p-6\">\n            {!isWalletAvailable && (\n              <Callout\n                variant=\"destructive\"\n                icon={<AlertCircle className=\"size-4\" />}\n              >\n                No Ethereum provider detected. Install a wallet extension.\n              </Callout>\n            )}\n\n            {loading ? (\n              <div className=\"text-center\">\n                <Loader2\n                  className=\"mx-auto mb-3 size-10 animate-spin\"\n                  aria-live=\"polite\"\n                />\n                <h4 className=\"text-xl font-semibold\">\n                  {selectedIndex != null\n                    ? `Opening ${list[selectedIndex]?.name ?? \"Wallet\"}`\n                    : \"Opening Wallet\"}\n                </h4>\n                <p className=\"text-muted-foreground\">\n                  Confirm connection in the walletâ€¦\n                </p>\n              </div>\n            ) : error ? (\n              <div className=\"text-center\">\n                <Wallet className=\"mx-auto mb-3 size-10\" />\n                <h4 className=\"text-xl font-semibold\">Opening Wallet</h4>\n                <p className=\"text-destructive\">\n                  {error.message || \"Connection failed\"}\n                </p>\n                {selectedIndex != null && (\n                  <Button\n                    className=\"mt-4\"\n                    variant=\"outline\"\n                    onClick={() =>\n                      onSelect(selectedIndex!, list[selectedIndex!]!)\n                    }\n                  >\n                    Retry Connection\n                  </Button>\n                )}\n              </div>\n            ) : isConnected ? (\n              <div className=\"text-center\">\n                <Check className=\"mx-auto mb-3 size-10\" />\n                <h4 className=\"text-xl font-semibold\">Wallet Connected</h4>\n                {account?.address && (\n                  <p className=\"text-muted-foreground\">\n                    Connected as{\" \"}\n                    <code className=\"font-mono\">{account.address}</code>\n                  </p>\n                )}\n              </div>\n            ) : (\n              <div className=\"mx-auto max-w-md\">\n                <h4 className=\"mb-3 text-center text-xl font-semibold\">\n                  What is a Wallet\n                </h4>\n                <div className=\"space-y-4 text-center\">\n                  <div>\n                    <p className=\"text-foreground font-medium\">Easy Login</p>\n                    <p className=\"text-muted-foreground\">\n                      No need to create new accounts and passwords for every\n                      website. Just connect your wallet and get going.\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-foreground font-medium\">\n                      Store your Digital Assets\n                    </p>\n                    <p className=\"text-muted-foreground\">\n                      Send, receive, store, and display your digital assets like\n                      NFTs & coins.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n          </section>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nexport type { ConnectorsModalProps }\n",
      "type": "registry:ui"
    }
  ]
}